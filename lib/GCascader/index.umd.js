var Re=Object.defineProperty;var H=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var j=(e,d,p)=>d in e?Re(e,d,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[d]=p,E=(e,d)=>{for(var p in d||(d={}))De.call(d,p)&&j(e,p,d[p]);if(H)for(var p of H(d))Fe.call(d,p)&&j(e,p,d[p]);return e};var P=(e,d,p)=>(j(e,typeof d!="symbol"?d+"":d,p),p);(function(e,d){typeof exports=="object"&&typeof module!="undefined"?module.exports=d(require("vue")):typeof define=="function"&&define.amd?define(["vue"],d):(e=typeof globalThis!="undefined"?globalThis:e||self,e.index=d(e.Vue))})(this,function(e){"use strict";const d=Object.prototype.toString,p=t=>d.call(t)==="[object Number]";var He="";const O=t=>["px","em","rem"].some(n=>String(t).endsWith(n)),S=Object.assign({name:"GIcon"},{props:{size:{type:[String,Number],validator:t=>p(t)||O(t)},color:{type:String}},setup(t){const n=t,o=e.computed(()=>{let l={};const{size:s,color:a}=n;return s&&(l.fontSize=O(s)?s:p(s)?s+"px":""),a&&(l.color=a),l});return(l,s)=>(e.openBlock(),e.createElementBlock("i",{class:"g-icon",style:e.normalizeStyle(e.unref(o))},[e.renderSlot(l.$slots,"default")],4))}});var I=typeof global=="object"&&global&&global.Object===Object&&global,K=I,U=typeof self=="object"&&self&&self.Object===Object&&self,X=K||U||Function("return this")(),Y=X,q=Y.Symbol,N=q,T=Object.prototype,W=T.hasOwnProperty,J=T.toString,B=N?N.toStringTag:void 0;function Q(t){var n=W.call(t,B),o=t[B];try{t[B]=void 0;var l=!0}catch{}var s=J.call(t);return l&&(n?t[B]=o:delete t[B]),s}var Z=Object.prototype,v=Z.toString;function ee(t){return v.call(t)}var te="[object Null]",ne="[object Undefined]",z=N?N.toStringTag:void 0;function oe(t){return t==null?t===void 0?ne:te:z&&z in Object(t)?Q(t):ee(t)}function le(t){return t!=null&&typeof t=="object"}var se="[object Number]";function L(t){return typeof t=="number"||le(t)&&oe(t)==se}const ae=Symbol("checkboxGroupContextKey"),M=Symbol("cascaderContextKey"),ce={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},re=[e.createElementVNode("path",{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5L207 474a32 32 0 0 0-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z",fill:"currentColor"},null,-1)];var G=e.defineComponent({name:"CheckOutlined",render:function(n,o){return e.openBlock(),e.createElementBlock("svg",ce,re)}});const ie={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},de=[e.createElementVNode("path",{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1)];var ue=e.defineComponent({name:"MinusOutlined",render:function(n,o){return e.openBlock(),e.createElementBlock("svg",ie,de)}});const pe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},fe=[e.createElementVNode("path",{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1l-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z",fill:"currentColor"},null,-1)];var he=e.defineComponent({name:"RightOutlined",render:function(n,o){return e.openBlock(),e.createElementBlock("svg",pe,fe)}}),Xe="";const me=["disabled"],_e=Object.assign({name:"GCheckbox"},{props:{modelValue:{type:Boolean},label:{},value:{},disabled:{type:Boolean},indeterminate:{type:Boolean}},emits:["update:modelValue","change"],setup(t,{emit:n}){const o=t,l="g-checkbox",s=e.inject(ae,null),a=e.computed(()=>o.modelValue),r=e.computed(()=>!!s),f=e.computed(()=>{var _;return r.value?(_=s.modelValue.value)==null?void 0:_.includes(o.value):!!a.value}),h=e.computed(()=>{var _,i;if(r.value){const{modelValue:m,min:k,max:w}=s;if(L(k.value)&&((_=m.value)==null?void 0:_.length)<=k.value)return f.value;if(L(w.value)&&((i=m.value)==null?void 0:i.length)>=w.value)return!f.value}return o.disabled}),u=e.computed(()=>o.indeterminate);function g(_){r.value?s.updateModelValue(o.value):(n("update:modelValue",!o.modelValue),e.nextTick(()=>{n("change",!o.modelValue)}))}return(_,i)=>(e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass([l,{"is-disabled":e.unref(h),"is-checked":e.unref(f),"is-indeterminate":e.unref(u)}])},[e.createElementVNode("span",{class:e.normalizeClass([l+"__input-wrapper"])},[e.createElementVNode("span",{class:e.normalizeClass([l+"__input-border"])},[e.createVNode(S,{class:e.normalizeClass([l+"__icon"])},{default:e.withCtx(()=>[e.unref(f)?(e.openBlock(),e.createBlock(e.unref(G),{key:0})):e.unref(u)?(e.openBlock(),e.createBlock(e.unref(ue),{key:1})):e.createCommentVNode("",!0)]),_:1},8,["class"])],2),e.createElementVNode("input",{type:"checkbox",class:e.normalizeClass([l+"__input"]),disabled:e.unref(h),onChange:g},null,42,me)],2),e.createElementVNode("span",{class:e.normalizeClass([l+"__label"])},[e.renderSlot(_.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(t.label||t.value),1)])],2)],2))}}),ge={multiple:!1,checkStrictly:!1,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled"},ke=({config:t})=>e.computed(()=>E(E({},ge),t)),ye=t=>{const n=[t];let{parent:o}=t;for(;o;)n.unshift(o),o=o.parent;return n};let be=0;class V{constructor(n,o,l,s=!1){P(this,"uid",be++);const{value:a,label:r,children:f}=o;this.config=o;const h=n[f];this.parent=l;const u=ye(this);this.level=s?0:l?l.level+1:1,this.value=n[a],this.label=n[r],this.childrenData=h,this.children=(h||[]).map(g=>new V(g,o,this)),this.pathNodes=u,this.pathLabels=u.map(g=>g.label),this.pathValues=u.map(g=>g.value),this.isLeaf=!(Array.isArray(h)&&h.length)}broadcast(n,...o){this.children.forEach(l=>{l&&(l.broadcast(n,...o),l[n]&&l[n](...o))})}parentCheck(n){this.checked=n,this.indeterminate=!1}emit(n,...o){const{parent:l}=this;l&&(l[n]&&l[n](...o),l.emit(n,...o))}childCheck(n){const{children:o}=this;let l=o.length,s=o.reduce((a,r)=>(a=a+(r.checked?1:r.indeterminate?.5:0),a),0);this.checked=l===s,this.indeterminate=s>0&&l!==s}doCheck(n){const{multiple:o}=this.config;o&&(this.checked=n,this.broadcast("parentCheck",n),this.emit("childCheck",n))}}function $(t,n){return t.reduce((o,l)=>(l.isLeaf?o.push(l):(!n&&o.push(l),o=o.concat($(l.children,n))),o),[])}class xe{constructor(n,o){const l=n.map(s=>new V(s,o));this.nodes=l,this.allNodes=$(l,!1),this.leafNodes=$(l,!0)}getNodes(){return this.nodes}getFlattedNodes(n){return n?this.leafNodes:this.allNodes}}var qe="";const Ce=Object.assign({name:"GCascaderMenuNode"},{props:{node:{type:V}},setup(t){const n=t,o="g-cascader",l=e.inject(M,{}),{config:s,checkedNodes:a,expandingNodes:r}=l,f=e.computed(()=>{const i=r.value;return Array.isArray(i)?i.some(m=>m.uid===n.node.uid):!1}),h=e.computed(()=>{const i=a.value;return Array.isArray(i)?i.some(m=>m.uid===n.node.uid):!1}),u=e.computed(()=>s.value.multiple);function g(i,m){i.active=!0,l.expandMenu(i)}function _(i){l.checkNodes(n.node,i)}return(i,m)=>(e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass([o+"__option",{active:e.unref(f),checked:e.unref(h)}]),onClick:m[0]||(m[0]=k=>g(t.node,i.i))},[e.createElementVNode("div",{class:e.normalizeClass([o+"__option-left"])},[e.unref(u)?(e.openBlock(),e.createBlock(_e,{key:0,class:e.normalizeClass([o+"__checkbox"]),modelValue:t.node.checked,indeterminate:t.node.indeterminate,"onUpdate:modelValue":_},null,8,["class","modelValue","indeterminate"])):e.createCommentVNode("",!0),e.createElementVNode("span",{class:e.normalizeClass([o+"__label"])},e.toDisplayString(t.node.label),3)],2),e.createElementVNode("div",{class:e.normalizeClass([o+"__option-right"])},[t.node.isLeaf?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(S,{key:0,class:"g-icon-right"},{default:e.withCtx(()=>[e.createVNode(e.unref(he))]),_:1})),e.unref(h)?(e.openBlock(),e.createBlock(S,{key:1},{default:e.withCtx(()=>[e.createVNode(e.unref(G))]),_:1})):e.createCommentVNode("",!0)],2)],2))}});var Je="";const we=Object.assign({name:"GCascaderMenu"},{props:{nodes:{type:Array,default:()=>[]}},setup(t){const n="g-cascader";return(o,l)=>(e.openBlock(),e.createElementBlock("ul",{class:e.normalizeClass([n+"__menu"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.nodes,(s,a)=>(e.openBlock(),e.createBlock(Ce,{key:a,node:s},null,8,["node"]))),128))],2))}}),Be=t=>t instanceof Element,x=new Map;let A;document.addEventListener("mousedown",t=>{A=t}),document.addEventListener("mouseup",t=>{for(const n of x.values())for(const{documentHandler:o}of n)o(t,A)});function R(t,n){let o=[];return Array.isArray(n.arg)?o=n.arg:Be(n.arg)&&o.push(n.arg),function(l,s){const a=n.instance.popperRef,r=l.target,f=s==null?void 0:s.target,h=!n||!n.instance,u=!r||!f,g=t.contains(r)||t.contains(f),_=t===r,i=o.length&&o.some(k=>k==null?void 0:k.contains(r))||o.length&&o.includes(f),m=a&&(a.contains(r)||a.contains(f));h||u||g||_||i||m||n.value(l,s)}}const Ne={beforeMount(t,n){x.has(t)||x.set(t,[]),x.get(t).push({documentHandler:R(t,n),bindingFn:n.value})},updated(t,n){x.has(t)||x.set(t,[]);const o=x.get(t),l=o.findIndex(a=>a.bindingFn===n.oldValue),s={documentHandler:R(t,n),bindingFn:n.value};l>=0?o.splice(l,1,s):o.push(s)},unmounted(t){x.delete(t)}};var Ze="";const Ve=["value"],D=Object.assign({name:"GCascader"},{props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,default:()=>[]},appendToBody:{type:Boolean,default:!1},config:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(t,{expose:n,emit:o}){const l=t,s="g-cascader",a=e.ref(!1),r=e.ref([]),f=e.ref(null),h=e.ref(""),u=e.ref(null),g=e.ref({}),_=e.ref(null),i=e.ref(null),m=ke(l),k=e.computed(()=>m.value.multiple);let w;function $e(){a.value=!a.value}e.watch(()=>l.options,()=>{je()},{deep:!0,immediate:!0}),e.watch(u,()=>{var y,C;let c;k.value?(c=u.value.map(b=>b.pathValues),h.value=u.value.map(b=>b.pathLabels.join(" / "))):(c=(y=u.value)==null?void 0:y[0].pathValues,h.value=(C=u.value)==null?void 0:C[0].pathLabels.join(" / ")),o("update:modelValue",c),o("change",c)}),e.watch(a,c=>{c&&l.appendToBody&&(g.value=ze(i))});function je(){w=new xe(l.options,m.value),r.value=[w.getNodes()]}function F(c){const{level:y,isLeaf:C}=c;let b=r.value.slice(0,y);C?k.value||(u.value=[c],a.value=!1):b.push(c.children),f.value=c.pathNodes,r.value=b}function Ee(c,y){k.value&&(c.doCheck(y),Oe(),y&&F(c))}function Oe(){k.value&&(u.value=w.getFlattedNodes(!0).filter(c=>c.checked))}function Te(c){console.log("----",c.target),a.value=!1}function ze(c){const y=window.scrollY||document.body.scrollTop,C=window.scrollX||document.body.scrollLeft,{width:b,left:Ge,bottom:Ae}=c.value.getBoundingClientRect();return{position:"fixed",width:b+"px",left:Ge+C+"px",top:Ae+y+"px"}}function Le(c){return w.getFlattedNodes(c).filter(y=>y.checked)}n({getCheckedNodes:Le});const Me={expandMenu:F,checkNodes:Ee,config:m,expandingNodes:f,checkedNodes:u};return e.provide(M,Me),(c,y)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([s])},[e.createElementVNode("div",{class:e.normalizeClass([s+"__input-wrapper"]),ref_key:"cascaderInputRef",ref:i,onClick:$e},[e.createElementVNode("input",{type:"text",class:e.normalizeClass([s+"__input"]),placeholder:"cascader select",value:h.value},null,10,Ve)],2),(e.openBlock(),e.createBlock(e.Teleport,{to:"body",disabled:!t.appendToBody},[e.createVNode(e.Transition,{name:"cascader-menus"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass([s+"__menus"]),ref_key:"menusRef",ref:_,style:e.normalizeStyle(g.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(C,b)=>(e.openBlock(),e.createBlock(we,{nodes:C,key:b},null,8,["nodes"]))),128))],6),[[e.vShow,a.value]])]),_:1})],8,["disabled"]))],2)),[[e.unref(Ne),Te,_.value]])}});var Se={install(t){t.component(D.name,D)}};return Se});
